(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2cef7ac"],{"1c48":function(e,t,a){},"504c":function(e,t,a){var n=a("0d58"),i=a("6821"),r=a("52a7").f;e.exports=function(e){return function(t){var a,s=i(t),c=n(s),o=c.length,l=0,u=[];while(o>l)r.call(s,a=c[l++])&&u.push(e?[a,s[a]]:s[a]);return u}}},8615:function(e,t,a){var n=a("5ca1"),i=a("504c")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},ac9f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"func"},[a("div",{staticClass:"search"},[a("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right",size:"small","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dateDuring,callback:function(t){e.dateDuring=t},expression:"dateDuring"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.getList("normal")}}},[e._v("搜索")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"table-consume-custom",attrs:{data:e.list.slice((e.pageVar.page-1)*e.pageVar.pageSize,e.pageVar.page*e.pageVar.pageSize),"cell-class-name":"bonusCellClass","header-cell-class-name":"el-table-header-cell-custom","show-summary":"","summary-method":e.totalSum,fit:"",border:""}},[a("el-table-column",{attrs:{align:"center",label:"提成时间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.order_time))]}}])}),a("el-table-column",{attrs:{align:"center",label:"员工姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.staff_name))]}}])}),a("el-table-column",{attrs:{align:"center",label:"提成类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.typeStr))]}}])}),a("el-table-column",{attrs:{align:"center",label:"提成商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.source_alias))]}}])}),a("el-table-column",{attrs:{align:"center",label:"业绩(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.performance_price))]}}])}),a("el-table-column",{attrs:{align:"center",label:"提成(元)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.dividends_price))]}}])}),a("el-table-column",{attrs:{align:"center",label:"是否指定"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.specified_switch?"是":"否"))]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageVar.page,"page-sizes":e.pageVar.pageSizes,"page-size":e.pageVar.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageVar.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],r=(a("c5f6"),a("5df3"),a("f400"),a("ac6a"),a("8615"),a("cadf"),a("551c"),a("097d"),a("ed08")),s={data:function(){return{dateDuring:"",searchForm:{start_time:"",end_time:"",staff_id:""},staffList:[],list:[],listLoading:!1,pickerOptions:{shortcuts:[{text:"昨天",onClick:function(e){var t=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 00:00:00"),a=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 23:59:59");t.setTime(t.getTime()-864e5),a.setTime(a.getTime()-864e5),e.$emit("pick",[t,a])}},{text:"最近一周",onClick:function(e){var t=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 00:00:00"),a=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 23:59:59");t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var t=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 00:00:00"),a=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 23:59:59");t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}}]},pageVar:{page:1,total:0,pageSize:50,pageSizes:[10,20,30,40,50]}}},watch:{dateDuring:function(){this.dateDuring&&this.dateDuring.length?(this.searchForm.start_time=Object(r["i"])(this.dateDuring[0],"{y}-{m}-{d}")+" 00:00:00",this.searchForm.end_time=Object(r["i"])(this.dateDuring[1],"{y}-{m}-{d}")+" 23:59:59"):(this.searchForm.start_time="",this.searchForm.end_time="")},$route:{handler:function(){var e=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 00:00:00"),t=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 23:59:59");this.dateDuring=[Object(r["i"])(e),Object(r["i"])(t)],this.$route.params.id&&(this.searchForm.staff_id=this.$route.params.id),setTimeout(function(){this.getList()}.bind(this))},deep:!0}},created:function(){var e=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 00:00:00"),t=new Date(Object(r["i"])((new Date).getTime(),"{y}-{m}-{d}")+" 23:59:59");this.dateDuring=[Object(r["i"])(e),Object(r["i"])(t)],this.$route.params.id&&(this.searchForm.staff_id=this.$route.params.id),setTimeout(function(){this.getList()}.bind(this))},methods:{getList:function(){var e=this,t=new Date(this.searchForm.end_time).getTime()-new Date(this.searchForm.start_time).getTime();!isNaN(t)&&t>26784e5?this.$Message.info("日期范围不能大于1个月"):(this.listLoading=!0,this.$api.common.getStaffList().then((function(t){e.staffList=Object.values(t.data),e.$api.business.getBonus(e.searchForm).then((function(t){t.data=t.data||[],t.data.map((function(t){switch(t.type){case"tenant_commodity":t.typeStr="商品";break;case"tenant_project":t.typeStr="服务项目";break;case"tenant_meter":t.typeStr="计次商品";break;case"tenant_meter_employ":t.typeStr="计次使用";break;case"tenant_speedy":t.typeStr="快速消费";break;case"tenant_member":t.typeStr="开卡";break;case"tenant_prestore":t.typeStr="充值";break;default:break}e.staffList.map((function(e){e.id===t.staff_id&&(t.staff_name=e.staff_name)}))})),e.list=t.data,e.listLoading=!1,e.pageVar.total=e.list.length}))})))},handleSizeChange:function(e){this.pageVar.pageSize=e,this.pageVar.page=1},handleCurrentChange:function(e){this.pageVar.page=e},totalSum:function(e){var t=e.columns,a=e.data,n=new Map([[4,"performance_price"],[5,"dividends_price"]]),i=[];return t.forEach((function(e,t){i[t]=0===t?"合计":0,n.has(t)&&(a.map((function(e){i[t]+=Number(e[n.get(t)])})),i[t]=i[t].toFixed(2))})),i}}},c=s,o=(a("f218"),a("2877")),l=Object(o["a"])(c,n,i,!1,null,"aaffbea2",null);l.options.__file="commission_list.vue";t["default"]=l.exports},f218:function(e,t,a){"use strict";var n=a("1c48"),i=a.n(n);i.a},f400:function(e,t,a){"use strict";var n=a("c26b"),i=a("b39a"),r="Map";e.exports=a("e0b8")(r,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,r),e);return t&&t.v},set:function(e,t){return n.def(i(this,r),0===e?0:e,t)}},n,!0)}}]);