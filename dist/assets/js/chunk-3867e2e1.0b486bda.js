(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3867e2e1"],{"504c":function(t,e,o){var i=o("0d58"),a=o("6821"),s=o("52a7").f;t.exports=function(t){return function(e){var o,n=a(e),r=i(n),l=r.length,m=0,c=[];while(l>m)s.call(n,o=r[m++])&&c.push(t?[o,n[o]]:n[o]);return c}}},"5bde":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Card",[o("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100,rules:t.ruleValidate,"label-position":"left"}},[o("Form-item",{attrs:{label:"员工工号",prop:"serial_num"}},[o("Input",{attrs:{placeholder:"请输入员工工号"},model:{value:t.formItem.serial_num,callback:function(e){t.$set(t.formItem,"serial_num",e)},expression:"formItem.serial_num"}})],1),o("Form-item",{attrs:{label:"员工姓名"}},[o("Input",{attrs:{placeholder:"请输入员工姓名"},model:{value:t.formItem.staff_name,callback:function(e){t.$set(t.formItem,"staff_name",e)},expression:"formItem.staff_name"}})],1),o("Form-item",{attrs:{label:"性别"}},[o("RadioGroup",{model:{value:t.formItem.gender,callback:function(e){t.$set(t.formItem,"gender",e)},expression:"formItem.gender"}},[o("Radio",{attrs:{label:1}},[t._v("男")]),o("Radio",{attrs:{label:0}},[t._v("女")])],1)],1),o("Form-item",{attrs:{label:"是否允许登录"}},[o("RadioGroup",{model:{value:t.formItem.login_status,callback:function(e){t.$set(t.formItem,"login_status",e)},expression:"formItem.login_status"}},[o("Radio",{attrs:{label:1}},[t._v("否")]),o("Radio",{attrs:{label:0}},[t._v("是")])],1)],1),o("Form-item",{attrs:{label:"手机号"}},[o("Input",{staticClass:"inum-w",attrs:{size:"large",placeholder:"请输入手机号"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone",e)},expression:"formItem.phone"}})],1),o("Form-item",{attrs:{label:"证件号"}},[o("Input",{staticClass:"inum-w",attrs:{size:"large",placeholder:"请输入员工证件号"},model:{value:t.formItem.certificate,callback:function(e){t.$set(t.formItem,"certificate",e)},expression:"formItem.certificate"}})],1),o("Form-item",{attrs:{label:"登录账号"}},[o("Input",{staticClass:"inum-w",attrs:{size:"large"},model:{value:t.formItem.account,callback:function(e){t.$set(t.formItem,"account",e)},expression:"formItem.account"}})],1),o("Form-item",{attrs:{label:"部门"}},[o("Select",{model:{value:t.formItem.group_id,callback:function(e){t.$set(t.formItem,"group_id",e)},expression:"formItem.group_id"}},[t._l(this.group,(function(e){return[o("Option",{key:e.id,attrs:{value:e.id,label:e.alias}},[t._v(t._s(e.alias))])]})),o("Option",{key:"0",attrs:{value:"0",label:"移除"},nativeOn:{click:function(e){return t.removeGroup(e)}}},[t._v("移除")])],2)],1),o("FormItem",{attrs:{label:"职位"}},[o("el-cascader",{ref:"position",attrs:{options:t.list,props:{multiple:!0,checkStrictly:!0,value:"id",label:"alias"},size:"small",clearable:""},on:{change:t.positionChange},model:{value:t.positionSelected,callback:function(e){t.positionSelected=e},expression:"positionSelected"}})],1),o("Form-item",{attrs:{label:"登录密码"}},[o("Input",{staticClass:"inum-w",attrs:{size:"large"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("确定")])],1)],1)],1)},a=[],s=(o("7f7f"),o("f751"),o("c5f6"),o("ac6a"),o("8615"),o("7514"),o("be94")),n=(o("cadf"),o("551c"),o("097d"),o("c24f")),r=o("2f62"),l={name:"add",data:function(){return{test:6,permission_list:[],list:[],positionSelected:[],group:null,formItem:{permission:[],orders_permission:[],serial_num:"",phone:"",account:"",password:"",gender:0,assist_rule:1,login_status:0,certificate:"",status:0,salary_num:"",staff_name:"",position:[],group_id:0},ruleValidate:{serial_num:[{required:!0,message:"请输入员工工号",trigger:"blur"}]}}},mounted:function(){this.getPositionList(),this.$route.params.id>0&&this.getDetail()},methods:Object(s["a"])({},Object(r["c"])(["closeTag"]),{getDetail:function(){var t=this;this.$api.common.getStaffList().then((function(e){t.formItem=Object.values(e.data).find((function(e){return e.id===Number(t.$route.params.id)})),t.formItem.old=JSON.parse(JSON.stringify(t.formItem)),Object.values(t.formItem.position).map((function(e){var o=[];e.department_id&&o.push(e.department_id),e.position_id&&o.push(e.position_id),t.positionSelected.push(o)}))}))},getPositionList:function(){var t=this;this.$api.common.getPosition().then((function(e){t.list=Object.values(e.data).filter((function(t){return 1!==t.status})).map((function(t,e){return Object.assign({pid:t.pid,alias:t.alias,id:t.id,status:t.status},t.positions.length?{}:{children:Object.values(t.positions).filter((function(t){return 1!==t.status}))})}))})).then((function(){t.$api.common.getGroup().then((function(e){t.group=e.data}))}))},positionChange:function(){var t=this;function e(t,e){if("number"===typeof t)return e.some((function(e,o){if(-1!==e.indexOf(t)&&e.length>1)return!0}))}this.positionSelected.map((function(o,i){1===o.length&&(e(o[0],t.positionSelected)&&t.positionSelected.splice(i,1),t.$refs.position.panel.clearCheckedNodes())}))},handleSubmit:function(t){var e=this;this.formItem.position=[],this.positionSelected.map((function(t){e.formItem.position.push({department_id:t[0],position_id:t[1]?t[1]:0})})),this.$refs[t].validate((function(t){t?e.$route.params.id>0?Object(n["update_staff"])(e.formItem).then((function(t){e.$Message.success("编辑成功!"),localStorage.removeItem("staff_list"),e.closeTag(e.$route)})):Object(n["staff"])(e.formItem).then((function(t){e.$Message.success("添加成功!"),localStorage.removeItem("staff_list"),e.closeTag(e.$route)})):e.$Message.error("请填写完整后再进行提交!")}))},handleReset:function(t){this.$refs[t].resetFields()},removeGroup:function(){this.formItem.group_id=0}})},m=l,c=(o("9c59"),o("2877")),u=Object(c["a"])(m,i,a,!1,null,"5e18ce2c",null);u.options.__file="add_employee.vue";e["default"]=u.exports},8615:function(t,e,o){var i=o("5ca1"),a=o("504c")(!1);i(i.S,"Object",{values:function(t){return a(t)}})},"9c02":function(t,e,o){},"9c59":function(t,e,o){"use strict";var i=o("9c02"),a=o.n(i);a.a}}]);