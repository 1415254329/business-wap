(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7d274b8"],{1245:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wx",attrs:{"element-loading-text":"自动登录中"}},[e("router-view")],1)},o=[],s=(e("a481"),e("28a5"),e("386d"),e("ed08")),a={data:function(){return{loading:!1}},created:function(){this.init()},methods:{init:function(){var t=this;this.$store.state.wx.openId?this.$store.state.wx.info?this.$store.state.wx.token||this.login(openId):this.getBindInfo(this.$store.state.wx.openId):this.getCode().then((function(n){n&&t.getAccess(n).then((function(n){t.$store.commit("wx/setOpenId",n.data.openid),t.getBindInfo(n.data.openid)}))}))},getCode:function(){var t=this;return n("code").then((function(n){if(n)return n;var e=Object(s["j"])();window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx5ceae484a5b167b5"+"&redirect_uri=".concat(encodeURIComponent(t.$config.wxUrl+t.$route.path),"&response_type=code")+"&scope=snsapi_userinfo&state=".concat(e,"#wechat_redirect")}));function n(t){return new Promise((function(n){var e=window.location.search.substr(1),i=e.split("&");if(1===i.length)n(e.split("=")[1]);else for(var o=0;o<i.length;o++)i[o].split("=")[0]===t&&n(i[o].split("=")[1])}))}},getAccess:function(t){return this.$api.wx.getAccess(t)},getBindInfo:function(t){var n=this;this.$api.wx.getBindInfo(t).then((function(e){e.data.bind?(n.$store.commit("wx/setInfo",e.data.bind),n.$store.state.wx.token||n.login(t)):"/wx/bind"!==n.$route.path&&(n.$router.replace("/wx/bind"),n.$Message.success("微信未绑定手机号，请先绑定"))}))},login:function(t){var n=this;this.loading=!0,this.$api.wx.login(t).then((function(t){n.loading=!1,n.$Message.success("自动登录成功"),n.$store.commit("wx/setToken",t.data)}),(function(t){n.loading=!1}))}}},r=a,c=(e("6764"),e("2877")),d=Object(c["a"])(r,i,o,!1,null,"6181681e",null);d.options.__file="index.vue";n["default"]=d.exports},"386d":function(t,n,e){"use strict";var i=e("cb7c"),o=e("83a1"),s=e("5f1b");e("214f")("search",1,(function(t,n,e,a){return[function(e){var i=t(this),o=void 0==e?void 0:e[n];return void 0!==o?o.call(e,i):new RegExp(e)[n](String(i))},function(t){var n=a(e,t,this);if(n.done)return n.value;var r=i(t),c=String(this),d=r.lastIndex;o(d,0)||(r.lastIndex=0);var u=s(r,c);return o(r.lastIndex,d)||(r.lastIndex=d),null===u?-1:u.index}]}))},6764:function(t,n,e){"use strict";var i=e("79ac"),o=e.n(i);o.a},"79ac":function(t,n,e){},"83a1":function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t===1/n:t!=t&&n!=n}}}]);